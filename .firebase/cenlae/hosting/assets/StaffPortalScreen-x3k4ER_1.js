import{j as e,i as z,u as L,v as $,w as q,U as M,x as D,y as P,q as _,z as U,D as V,E as T,J as F,K as H,a as J}from"./ui-BeP2E2EB.js";import{a as K,r as a}from"./vendor-CGaW2js3.js";import{u as O,h as W,f as B}from"./index-1xibhE-N.js";import{F as I}from"./FloatingLabelInput-Bllz3MGy.js";import"./firebase-BCTgdpS7.js";import"./utils-CDN07tui.js";const se=()=>{const r=K(),{signIn:u}=O(),[o,s]=a.useState("loading"),[l,m]=a.useState(""),[i,g]=a.useState(""),[t,p]=a.useState(null),[d,n]=a.useState(""),[c,f]=a.useState(""),[b,y]=a.useState(!1),[v,h]=a.useState(""),[N,A]=a.useState(!1);a.useEffect(()=>{R()},[]);const R=async()=>{try{const j=(await W(B,"checkSystemAccess")()).data;j.allowed?(s("allowed"),m(j.ip)):(s("denied"),m(j.ip),g(j.reason||"Ubicación no autorizada."))}catch(x){console.error("Error verifying access:",x),s("denied"),g("Error de conexión o configuración.")}},w=x=>{o==="allowed"&&(t===x?p(null):(p(x),n(""),f(""),h("")))},S=async x=>{x.preventDefault(),h(""),A(!0);try{await u(d,c),t==="doctor"?r("/app"):(t==="assistant"||t==="reception")&&r("/app/assistant")}catch(k){console.error(k),h("Credenciales incorrectas o error de acceso.")}finally{A(!1)}};return o==="loading"?e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col items-center justify-center p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mb-6"}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Validando Acceso al Sistema"}),e.jsx("p",{className:"text-gray-500",children:"Verificando seguridad y ubicación..."}),e.jsxs("div",{className:"mt-8 flex items-center gap-2 text-sm text-gray-400",children:[e.jsx(z,{size:16}),e.jsx("span",{children:"Conexión Segura TLS 1.3"})]})]}):o==="denied"?e.jsx("div",{className:"min-h-screen bg-red-50 flex items-center justify-center p-6",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl overflow-hidden",children:[e.jsxs("div",{className:"bg-red-600 p-6 text-center",children:[e.jsx(z,{size:48,className:"text-white mx-auto mb-4"}),e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Acceso Restringido"})]}),e.jsxs("div",{className:"p-8 text-center space-y-6",children:[e.jsxs("div",{className:"bg-red-50 text-red-800 p-4 rounded-xl flex items-start gap-3 text-left",children:[e.jsx(L,{className:"shrink-0 mt-0.5",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-sm",children:"Ubicación No Autorizada"}),e.jsxs("p",{className:"text-xs mt-1",children:["Su dirección IP (",l,") no está registrada en la lista blanca de seguridad del sistema."]})]})]}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Este portal es para uso exclusivo del personal autorizado dentro de las instalaciones clínicas o redes privadas aprobadas."}),e.jsx("button",{onClick:()=>window.location.reload(),className:"w-full py-3 bg-gray-900 text-white rounded-xl font-medium hover:bg-gray-800 transition-colors",children:"Reintentar Conexión"}),e.jsxs("div",{className:"pt-6 border-t border-gray-100 flex justify-center gap-4 text-xs text-gray-400",children:[e.jsxs("span",{children:["ID: ",l]}),e.jsx("span",{children:"•"}),e.jsx("span",{children:"V 2.0.1"})]})]})]})}):e.jsxs("div",{className:"min-h-screen flex flex-col lg:flex-row",children:[e.jsxs("div",{className:"lg:w-1/2 p-6 lg:p-12 flex flex-col bg-white relative overflow-hidden min-h-screen",children:[e.jsxs("button",{onClick:()=>r("/"),className:"absolute top-6 left-6 z-50 flex items-center gap-2 text-gray-500 hover:text-[#083c79] transition-colors p-2 rounded-lg hover:bg-gray-50",children:[e.jsx($,{size:20}),e.jsx("span",{className:"font-medium text-sm",children:"Regresar"})]}),e.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-blue-50 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 opacity-50 z-0"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-teal-50 rounded-full blur-3xl translate-y-1/2 -translate-x-1/2 opacity-50 z-0"}),e.jsxs("div",{className:"z-10 relative w-full max-w-lg mx-auto flex flex-col h-full",children:[e.jsx("div",{className:"pt-8 lg:pt-12 flex justify-center",children:e.jsx("img",{src:"https://static.wixstatic.com/media/3743a7_bc65d6328e9c443e95b330a92181fbc8~mv2.png/v1/crop/x_13,y_9,w_387,h_61/fill/w_542,h_85,al_c,lg_1,q_85,enc_avif,quality_auto/logo-drmairenavalle.png",alt:"Dr. Milton Mairena Valle",className:"h-16 md:h-20 w-auto object-contain"})}),e.jsx("div",{className:"flex-1 flex flex-col justify-center items-center text-center space-y-4",children:e.jsxs("h1",{className:"text-4xl lg:text-5xl font-bold text-gray-900 leading-tight tracking-tight",children:["Portal Administrativo",e.jsx("br",{}),e.jsx("span",{className:"text-[#083c79]",children:"Centralizado"})]})}),e.jsxs("div",{className:"pb-8 lg:pb-12 flex flex-col items-center space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 text-sm font-semibold text-green-700 bg-green-50 border border-green-200 px-6 py-3 rounded-full shadow-sm",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx(z,{size:16}),e.jsxs("span",{children:["Conexión Autorizada: ",l]})]}),e.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-transparent via-[#083c79] to-transparent opacity-20"}),e.jsxs("div",{className:"text-center space-y-1",children:[e.jsx("p",{className:"text-sm text-gray-400 font-medium tracking-wide",children:"© 2026 Sistema CENLAE. Todos los derechos reservados."}),e.jsx("p",{className:"text-xs text-gray-300",children:"v2.0.1 • Secure TLS 1.3"})]}),e.jsxs("a",{href:"https://wa.me/50589776879?text=Hola%2C%20Joseph%20me%20gustaria%20saber%20mas%20de%20tus%20Servicios%20de%20desarrollo%20Web",target:"_blank",rel:"noopener noreferrer",className:"text-sm text-gray-500 hover:text-[#083c79] transition-colors duration-300 flex items-center gap-1.5 group mt-4",children:[e.jsx("span",{children:"Hecho con"}),e.jsx("span",{className:"text-red-500 group-hover:scale-110 transition-transform duration-300 text-base",children:"♥"}),e.jsx("span",{children:"en Nicaragua"})]})]})]})]}),e.jsxs("div",{className:"lg:w-1/2 bg-[#083c79] p-6 lg:p-12 flex items-center justify-center relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-full h-full opacity-10 pointer-events-none",children:e.jsx("div",{className:"absolute right-0 top-0 w-96 h-96 bg-white rounded-full blur-3xl translate-x-1/2 -translate-y-1/4"})}),e.jsxs("div",{className:"max-w-md w-full space-y-8 relative z-10",children:[e.jsx("div",{className:"text-center lg:text-left mb-8",children:e.jsx("h3",{className:"text-xl font-bold text-white",children:"Seleccione su Perfil"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(C,{role:"doctor",title:"Personal Médico",subtitle:"Doctores y especialistas",icon:e.jsx(q,{size:28}),isSelected:t==="doctor",onSelect:()=>w("doctor"),color:"blue",children:t==="doctor"&&e.jsx(E,{email:d,setEmail:n,pass:c,setPass:f,showPassword:b,setShowPassword:y,error:v,setError:h,loading:N,onSubmit:S,requiredEmail:"dr@cenlae.com"})}),e.jsx(C,{role:"assistant",title:"Administración",subtitle:"Asistentes y Auxiliares",icon:e.jsx(M,{size:28}),isSelected:t==="assistant",onSelect:()=>w("assistant"),color:"purple",children:t==="assistant"&&e.jsx(E,{email:d,setEmail:n,pass:c,setPass:f,showPassword:b,setShowPassword:y,error:v,setError:h,loading:N,onSubmit:S,requiredEmail:"asistente@cenlae.com"})}),e.jsx(C,{role:"reception",title:"Recepción",subtitle:"Atención al Paciente",icon:e.jsx(D,{size:28}),isSelected:t==="reception",onSelect:()=>w("reception"),color:"teal",children:t==="reception"&&e.jsx(E,{email:d,setEmail:n,pass:c,setPass:f,showPassword:b,setShowPassword:y,error:v,setError:h,loading:N,onSubmit:S,requiredEmail:"recepcion@cenlae.com"})})]}),e.jsx("div",{className:"pt-8 border-t border-blue-800",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-blue-300",children:[e.jsx(P,{size:12}),e.jsx("span",{children:"Acceso monitoreado y registrado por IP"})]})})]})]})]})},C=({title:r,subtitle:u,icon:o,isSelected:s,onSelect:l,children:m,color:i})=>e.jsxs(_.div,{layout:!0,initial:!1,animate:{backgroundColor:"white",scale:s?1.02:1},className:`w-full rounded-2xl overflow-hidden shadow-sm transition-all ${s?"shadow-xl":"shadow-md border border-gray-200"}`,children:[e.jsxs("button",{onClick:l,className:"w-full p-6 text-left flex items-center gap-5 focus:outline-none",children:[e.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center transition-colors shrink-0
                    ${s?`bg-${i}-50 text-${i}-600`:`bg-${i}-50 text-${i}-600`}
                `,children:o}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-lg font-bold transition-colors text-gray-900",children:r}),e.jsx("p",{className:"text-sm transition-colors text-gray-500",children:u})]}),e.jsx(U,{className:`transition-transform duration-300 ${s?"rotate-90 text-gray-400":"text-gray-400"}`})]}),e.jsx(V,{children:s&&e.jsx(_.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},children:e.jsx("div",{className:"px-6 pb-6 pt-0",children:m})})})]}),E=({email:r,setEmail:u,pass:o,setPass:s,showPassword:l,setShowPassword:m,error:i,setError:g,loading:t,onSubmit:p,requiredEmail:d})=>{const n=!d||r===d;return e.jsxs("form",{onSubmit:p,className:"space-y-4 mt-2",children:[i&&e.jsxs("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg text-xs font-medium border border-red-100 flex items-center gap-2",children:[e.jsx(L,{size:14}),i]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(I,{label:"Correo Electrónico",type:"email",required:!0,value:r,onChange:c=>{u(c.target.value),g("")},icon:e.jsx(T,{size:18}),containerClassName:"!mb-0"}),e.jsxs("div",{className:"relative",children:[e.jsx(I,{label:"Contraseña",type:l?"text":"password",required:!0,value:o,onChange:c=>{s(c.target.value),g("")},icon:e.jsx(P,{size:18}),containerClassName:"!mb-0"}),e.jsx("button",{type:"button",onClick:()=>m(!l),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-blue-600 transition-colors",children:l?e.jsx(F,{size:18}):e.jsx(H,{size:18})})]})]}),e.jsx("button",{type:"submit",disabled:t||!n,className:`w-full py-3 rounded-xl font-bold shadow-lg transition-all flex items-center justify-center gap-2 mt-2
                    ${n&&!t?"bg-[#083c79] hover:bg-blue-900 text-white shadow-blue-900/20 active:scale-[0.98]":"bg-gray-300 text-gray-500 cursor-not-allowed"}
                `,children:t?e.jsx(J,{size:20,className:"animate-spin"}):"Ingresar al Portal"}),!n&&r.length>0&&e.jsx("p",{className:"text-xs text-red-500 text-center mt-1",children:"Ingrese el Correo Electrónico Asignado para acceder al Portal"})]})};export{se as StaffPortalScreen};
